<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Groom & Style | Randevu</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Poppins', sans-serif; background: #1a1a1a; color: #eee; margin: 0; padding: 15px; }
        .card { background: #252525; border-radius: 20px; max-width: 450px; margin: auto; border-top: 5px solid #d4af37; box-shadow: 0 15px 35px rgba(0,0,0,0.5); overflow: hidden; }
        .header { background: #252525; padding: 30px; text-align: center; }
        .header h2 { margin: 0; color: #d4af37; letter-spacing: 2px; }
        .content { padding: 25px; }
        label { display: block; margin-top: 15px; font-weight: 400; color: #aaa; font-size: 14px; }
        input, select, textarea { width: 100%; padding: 12px; margin-top: 8px; border-radius: 10px; border: 1px solid #444; background: #333; color: white; font-size: 16px; box-sizing: border-box; }
        
        .hizmet-item { 
            display: flex; align-items: center; background: #333; padding: 12px; 
            margin-bottom: 10px; border-radius: 12px; cursor: pointer; transition: 0.3s;
            border: 1px solid transparent;
        }
        .hizmet-item:hover { border-color: #d4af37; }
        .hizmet-item input { width: 20px; height: 20px; margin-right: 15px; accent-color: #d4af37; }
        .hizmet-info { flex-grow: 1; }
        .hizmet-name { display: block; font-weight: 600; }
        .hizmet-detail { font-size: 12px; color: #888; }

        #btn-randevu { 
            width: 100%; padding: 15px; margin-top: 25px; border-radius: 12px; border: none; 
            font-size: 16px; font-weight: bold; cursor: pointer; 
            background: linear-gradient(45deg, #d4af37, #f2d06b); color:#1a1a1a; 
            transition: transform 0.2s;
        }
        #btn-randevu:active { transform: scale(0.98); }
    </style>
</head>
<body>
<div class="card">
    <div class="header">
        <h2>CENTLEMEN BARBER</h2>
        <p style="font-size: 12px; color: #666;">Stilinizi Keşfedin</p>
    </div>
    <div class="content">
        <label>Adınız Soyadınız:</label>
        <input type="text" id="m_ad" placeholder="Örn: Ahmet Yılmaz">

        <label>Telefon Numaranız:</label>
        <input type="tel" id="m_tel" placeholder="05xx xxx xx xx">

        <label>İstediğiniz Hizmetler:</label>
        <div id="hizmet-listesi"></div>

        <label>Randevu Tarihi ve Saati:</label>
        <input type="datetime-local" id="r_tarih">

        <label>Özel Not (Opsiyonel):</label>
        <textarea id="r_not" rows="2"></textarea>

        <button type="button" id="btn-randevu" onclick="randevuAl()">RANDEVU TALEBİ OLUŞTUR</button>
    </div>
</div>

<script>
const hizmetler = {"Saç Kesimi": {"sure": "30 dk", "fiyat": "250 TL"}, "Sakal Tıraşı": {"sure": "15 dk", "fiyat": "150 TL"}, "Saç & Sakal Kombin": {"sure": "45 dk", "fiyat": "350 TL"}, "Cilt Bakımı": {"sure": "20 dk", "fiyat": "200 TL"}, "Saç Yıkama & Fon": {"sure": "15 dk", "fiyat": "100 TL"}};

window.onload = function() {
    const container = document.getElementById('hizmet-listesi');
    for (let h in hizmetler) {
        container.innerHTML += `
            <div class="hizmet-item" onclick="this.querySelector('input').click()">
                <input type="checkbox" class="h-check" value="${h}">
                <div class="hizmet-info">
                    <span class="hizmet-name">${h}</span>
                    <span class="hizmet-detail">${hizmetler[h].sure} | ${hizmetler[h].fiyat}</span>
                </div>
            </div>
        `;
    }
};

async function randevuAl() {
    const ad = document.getElementById('m_ad').value;
    const tel = document.getElementById('m_tel').value;
    const tarih = document.getElementById('r_tarih').value;
    const secilenler = Array.from(document.querySelectorAll('.h-check:checked')).map(c => c.value);

    if(!ad || !tel || !tarih || secilenler.length === 0) {
        alert("⚠️ Lütfen tüm alanları doldurun ve en az bir hizmet seçin.");
        return;
    }

    const btn = document.getElementById('btn-randevu');
    btn.innerText = "GÖNDERİLİYOR...";
    btn.disabled = true;

    const formData = new URLSearchParams();
    formData.append("Musteri", ad);
    formData.append("Telefon", tel);
    formData.append("Tarih", tarih);
    formData.append("Hizmetler", secilenler.join(", "));
    formData.append("Notlar", document.getElementById('r_not').value);

    try {
        await fetch("https://script.google.com/macros/s/AKfycbzF7U0Ce1c7wKzJ1XT5N_MQIrVFRaDnil8BgkYpOBgDNeaApLi5gRgGdtCju7-8Ccel0g/exec", {
            method: "POST",
            body: formData,
            mode: "no-cors"
        });
        alert("✅ Randevu talebiniz başarıyla alındı. Sizinle iletişime geçeceğiz.");
        location.reload();
    } catch (error) {
        alert("❌ Bir hata oluştu.");
        btn.innerText = "TEKRAR DENE";
        btn.disabled = false;
    }
}
</script>
</body>
</html>